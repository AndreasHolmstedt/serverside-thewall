{"ast":null,"code":"import _objectSpread from \"/Users/andreasholmstedt/Desktop/SKOLA/TheWall/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/andreasholmstedt/Desktop/SKOLA/TheWall/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/andreasholmstedt/Desktop/SKOLA/TheWall/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/andreasholmstedt/Desktop/SKOLA/TheWall/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/andreasholmstedt/Desktop/SKOLA/TheWall/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/andreasholmstedt/Desktop/SKOLA/TheWall/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/andreasholmstedt/Desktop/SKOLA/TheWall/src/components/Wall/Wall.js\";\nimport React, { Component } from 'react';\nimport './Wall.css';\nvar API = 'http://localhost:4000/api/statuses/';\n\nvar Wall =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Wall, _Component);\n\n  function Wall(props) {\n    var _this;\n\n    _classCallCheck(this, Wall);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Wall).call(this, props));\n\n    _this.matchStatusUser = function () {\n      var statusList = [];\n      var users = _this.props.users;\n      var statuses = _this.state.apiStatus; // For every user\n\n      for (var i = 0; i < users.length; i++) {\n        // For every user, for every status\n        for (var e = 0; e < statuses.length; e++) {\n          // If the user is the author of a status\n          if (users[i]._id === statuses[e].author) {\n            var timeSince = function timeSince(date) {\n              var seconds = Math.floor((new Date() - date) / 1000);\n              var interval = Math.floor(seconds / 31536000);\n\n              if (interval >= 1) {\n                return interval + \" years ago\";\n              }\n\n              interval = Math.floor(seconds / 2592000);\n\n              if (interval >= 1) {\n                return interval + \" months ago\";\n              }\n\n              interval = Math.floor(seconds / 86400);\n\n              if (interval >= 1) {\n                return interval + \" days ago\";\n              }\n\n              interval = Math.floor(seconds / 3600);\n\n              if (interval >= 1) {\n                return interval + \" h ago\";\n              }\n\n              interval = Math.floor(seconds / 60);\n\n              if (interval >= 1) {\n                return interval + \" min ago\";\n              }\n\n              return \" just now\";\n            };\n\n            // Add User name + Lastname + Email + Avatar etc to the status\n            var convTime = Date.parse(statuses[e].timestamp); //Converts the timesamp in statuses to \"unix timestamp\"\n\n            var compare = new Date(Date.now() - convTime); //Compares the time when it was posted with todays date/time\n\n            var status = {\n              name: \"\".concat(users[i].first_name, \" \").concat(users[i].last_name),\n              email: users[i].email,\n              text: statuses[e].text,\n              time: statuses[e].timestamp,\n              author: statuses[e].author,\n              timeAgo: timeSince(new Date(Date.now() - compare)),\n              _id: statuses[e]._id,\n              image: users[i].url //Func that tells how long ago status was posted\n\n            };\n            statusList.push(status);\n          }\n        }\n      }\n\n      _this.setState({\n        matchedStatus: statusList.sort(function (a, b) {\n          return new Date(b.time) - new Date(a.time);\n        })\n      });\n    };\n\n    _this.enableEdit = function (data) {\n      _this.setState({\n        editStatus: data._id,\n        edit: true,\n        text: data.text\n      });\n    };\n\n    _this.disableEdit = function () {\n      _this.setState({\n        editStatus: 0,\n        edit: false,\n        text: \"\"\n      });\n    };\n\n    _this.deleteStatus = function (data) {\n      fetch(\"http://localhost:4000/api/status/\" + data._id, {\n        method: \"DELETE\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (msg) {\n        _this.fetchStatuses();\n\n        console.log(msg);\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      _this.setState({\n        text: event.target.value\n      });\n    };\n\n    _this.handleTextAreaChange = function (event) {\n      _this.setState({\n        textArea: event.target.value\n      });\n    };\n\n    _this.commitChange = function (data) {\n      var newData = _objectSpread({}, data, {\n        text: _this.state.text //fetch(API,)\n\n      });\n    };\n\n    _this.putStatus = function () {\n      fetch(\"http://localhost:4000/api/status?text=\" + _this.state.textArea + \"&author=\" + _this.state.user._id, {\n        method: \"PUT\"\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this.fetchStatuses();\n\n        console.log(data);\n      });\n      /*fetch(\"http://localhost:4000/api/status\", {\n          method: 'PUT',\n          body: JSON.stringify({\n              text: 'test2',\n              author: \"5bbf5bd9adasc390a78\",\n              timestamp: 'time',\n              likes: [],\n              comments: [],\n          }),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n      })\n      .then(res => res.json())\n      .then(response => console.log('Success:', JSON.stringify(response)))\n      .catch(error => console.error('Error:', error));*/\n    };\n\n    _this.state = {\n      user: _this.props.user,\n      apiStatus: [],\n      matchedStatus: [],\n      editStatus: 0,\n      edit: false,\n      text: \"\",\n      textArea: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Wall, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchStatuses();\n    }\n  }, {\n    key: \"fetchStatuses\",\n    value: function fetchStatuses() {\n      var _this2 = this;\n\n      fetch(API + this.state.user._id).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        return _this2.setState({\n          apiStatus: data\n        }, function () {\n          _this2.matchStatusUser();\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var list = this.state.matchedStatus.map(function (data) {\n        return React.createElement(\"div\", {\n          key: data._id,\n          className: \"statusContainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"userInfoCard\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"imageHeader\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"userImage\",\n          src: data.image,\n          alt: \"avatar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"userNameTime\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, data.name), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, data.timeAgo))), React.createElement(\"div\", {\n          className: \"info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, _this3.state.user._id == data.author ? React.createElement(React.Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"infoDots\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, \"...\"), React.createElement(\"div\", {\n          className: \"options\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this3.enableEdit(data);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, \"Edit\"), React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this3.deleteStatus(data);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, \"Delete\"))) : null)), React.createElement(\"div\", {\n          className: \"statusText\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, _this3.state.editStatus === data._id && _this3.state.edit ? React.createElement(React.Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          value: _this3.state.text,\n          onChange: _this3.handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this3.commitChange(data);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, \"Save\"), React.createElement(\"button\", {\n          onClick: _this3.disableEdit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, \"Discard\")) : React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, data.text)));\n      });\n      return React.createElement(\"div\", {\n        className: \"wallContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"createStatusContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"optionCreate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Status\")), React.createElement(\"textarea\", {\n        className: \"textAreaStatus\",\n        placeholder: \"What's up?\",\n        value: this.state.textArea,\n        onChange: this.handleTextAreaChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"postButtonContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"settingsButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Settings\"), React.createElement(\"button\", {\n        onClick: this.putStatus,\n        className: \"postButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Post\"))), list);\n    }\n  }]);\n\n  return Wall;\n}(Component);\n\nexport default Wall;","map":{"version":3,"sources":["/Users/andreasholmstedt/Desktop/SKOLA/TheWall/src/components/Wall/Wall.js"],"names":["React","Component","API","Wall","props","matchStatusUser","statusList","users","statuses","state","apiStatus","i","length","e","_id","author","timeSince","date","seconds","Math","floor","Date","interval","convTime","parse","timestamp","compare","now","status","name","first_name","last_name","email","text","time","timeAgo","image","url","push","setState","matchedStatus","sort","a","b","enableEdit","data","editStatus","edit","disableEdit","deleteStatus","fetch","method","then","res","json","msg","fetchStatuses","console","log","handleInputChange","event","target","value","handleTextAreaChange","textArea","commitChange","newData","putStatus","user","response","list","map"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,YAAP;AAEA,IAAMC,GAAG,GAAG,qCAAZ;;IAGMC,I;;;;;AACF,gBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,8EAAMA,KAAN;;AADc,UAkBlBC,eAlBkB,GAkBA,YAAM;AACpB,UAAIC,UAAU,GAAG,EAAjB;AACA,UAAIC,KAAK,GAAG,MAAKH,KAAL,CAAWG,KAAvB;AACA,UAAIC,QAAQ,GAAG,MAAKC,KAAL,CAAWC,SAA1B,CAHoB,CAKpB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,KAAK,CAACK,MAA1B,EAAkCD,CAAC,EAAnC,EAAwC;AACpC;AACA,aAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,QAAQ,CAACI,MAA7B,EAAqCC,CAAC,EAAtC,EAA0C;AACtC;AACA,cAAIN,KAAK,CAACI,CAAD,CAAL,CAASG,GAAT,KAAiBN,QAAQ,CAACK,CAAD,CAAR,CAAYE,MAAjC,EAAwC;AAAA,gBAiB3BC,SAjB2B,GAiBpC,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;AAEvB,kBAAIC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAW,CAAC,IAAIC,IAAJ,KAAaJ,IAAd,IAAsB,IAAjC,CAAd;AAEA,kBAAIK,QAAQ,GAAGH,IAAI,CAACC,KAAL,CAAWF,OAAO,GAAG,QAArB,CAAf;;AAEA,kBAAII,QAAQ,IAAI,CAAhB,EAAmB;AACjB,uBAAOA,QAAQ,GAAG,YAAlB;AACD;;AACDA,cAAAA,QAAQ,GAAGH,IAAI,CAACC,KAAL,CAAWF,OAAO,GAAG,OAArB,CAAX;;AACA,kBAAII,QAAQ,IAAI,CAAhB,EAAmB;AACjB,uBAAOA,QAAQ,GAAG,aAAlB;AACD;;AACDA,cAAAA,QAAQ,GAAGH,IAAI,CAACC,KAAL,CAAWF,OAAO,GAAG,KAArB,CAAX;;AACA,kBAAII,QAAQ,IAAI,CAAhB,EAAmB;AACjB,uBAAOA,QAAQ,GAAG,WAAlB;AACD;;AACDA,cAAAA,QAAQ,GAAGH,IAAI,CAACC,KAAL,CAAWF,OAAO,GAAG,IAArB,CAAX;;AACA,kBAAII,QAAQ,IAAI,CAAhB,EAAmB;AACjB,uBAAOA,QAAQ,GAAG,QAAlB;AACD;;AACDA,cAAAA,QAAQ,GAAGH,IAAI,CAACC,KAAL,CAAWF,OAAO,GAAG,EAArB,CAAX;;AACA,kBAAII,QAAQ,IAAI,CAAhB,EAAmB;AACjB,uBAAOA,QAAQ,GAAG,UAAlB;AACD;;AACD,qBAAO,WAAP;AACD,aA3CmC;;AACpC;AAEA,gBAAIC,QAAQ,GAAGF,IAAI,CAACG,KAAL,CAAWhB,QAAQ,CAACK,CAAD,CAAR,CAAYY,SAAvB,CAAf,CAHoC,CAGa;;AACjD,gBAAIC,OAAO,GAAG,IAAIL,IAAJ,CAASA,IAAI,CAACM,GAAL,KAAYJ,QAArB,CAAd,CAJoC,CAIS;;AAE7C,gBAAIK,MAAM,GAAG;AACTC,cAAAA,IAAI,YAAKtB,KAAK,CAACI,CAAD,CAAL,CAASmB,UAAd,cAA4BvB,KAAK,CAACI,CAAD,CAAL,CAASoB,SAArC,CADK;AAETC,cAAAA,KAAK,EAAEzB,KAAK,CAACI,CAAD,CAAL,CAASqB,KAFP;AAGTC,cAAAA,IAAI,EAAEzB,QAAQ,CAACK,CAAD,CAAR,CAAYoB,IAHT;AAITC,cAAAA,IAAI,EAAE1B,QAAQ,CAACK,CAAD,CAAR,CAAYY,SAJT;AAKTV,cAAAA,MAAM,EAAEP,QAAQ,CAACK,CAAD,CAAR,CAAYE,MALX;AAMToB,cAAAA,OAAO,EAAEnB,SAAS,CAAC,IAAIK,IAAJ,CAASA,IAAI,CAACM,GAAL,KAAaD,OAAtB,CAAD,CANT;AAOTZ,cAAAA,GAAG,EAAEN,QAAQ,CAACK,CAAD,CAAR,CAAYC,GAPR;AAQTsB,cAAAA,KAAK,EAAE7B,KAAK,CAACI,CAAD,CAAL,CAAS0B,GARP,CAUb;;AAVa,aAAb;AAsCA/B,YAAAA,UAAU,CAACgC,IAAX,CAAgBV,MAAhB;AACH;AACJ;AACJ;;AACD,YAAKW,QAAL,CACI;AACIC,QAAAA,aAAa,EAAElC,UAAU,CAACmC,IAAX,CAAgB,UAASC,CAAT,EAAWC,CAAX,EAAa;AACxC,iBAAO,IAAItB,IAAJ,CAASsB,CAAC,CAACT,IAAX,IAAmB,IAAIb,IAAJ,CAASqB,CAAC,CAACR,IAAX,CAA1B;AACH,SAFc;AADnB,OADJ;AAOH,KAnFiB;;AAAA,UAiGlBU,UAjGkB,GAiGL,UAAAC,IAAI,EAAI;AACjB,YAAKN,QAAL,CAAc;AAAEO,QAAAA,UAAU,EAAED,IAAI,CAAC/B,GAAnB;AAAwBiC,QAAAA,IAAI,EAAE,IAA9B;AAAoCd,QAAAA,IAAI,EAAEY,IAAI,CAACZ;AAA/C,OAAd;AACH,KAnGiB;;AAAA,UAqGlBe,WArGkB,GAqGJ,YAAM;AAChB,YAAKT,QAAL,CAAc;AAAEO,QAAAA,UAAU,EAAE,CAAd;AAAiBC,QAAAA,IAAI,EAAE,KAAvB;AAA8Bd,QAAAA,IAAI,EAAE;AAApC,OAAd;AACH,KAvGiB;;AAAA,UAyGlBgB,YAzGkB,GAyGH,UAAAJ,IAAI,EAAI;AACnBK,MAAAA,KAAK,CAAC,sCAAsCL,IAAI,CAAC/B,GAA5C,EAAiD;AAAEqC,QAAAA,MAAM,EAAE;AAAV,OAAjD,CAAL,CACCC,IADD,CACM,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OADT,EAECF,IAFD,CAEM,UAAAG,GAAG,EAAI;AACT,cAAKC,aAAL;;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACH,OALD;AAMH,KAhHiB;;AAAA,UAkHlBI,iBAlHkB,GAkHE,UAAAC,KAAK,EAAI;AACzB,YAAKrB,QAAL,CAAc;AAAEN,QAAAA,IAAI,EAAE2B,KAAK,CAACC,MAAN,CAAaC;AAArB,OAAd;AACH,KApHiB;;AAAA,UAsHlBC,oBAtHkB,GAsHK,UAAAH,KAAK,EAAI;AAC5B,YAAKrB,QAAL,CAAc;AAAEyB,QAAAA,QAAQ,EAAEJ,KAAK,CAACC,MAAN,CAAaC;AAAzB,OAAd;AACH,KAxHiB;;AAAA,UA0HlBG,YA1HkB,GA0HH,UAAApB,IAAI,EAAI;AACnB,UAAIqB,OAAO,qBAAQrB,IAAR;AAAcZ,QAAAA,IAAI,EAAE,MAAKxB,KAAL,CAAWwB,IAA/B,CAEX;;AAFW,QAAX;AAGH,KA9HiB;;AAAA,UAgIlBkC,SAhIkB,GAgIN,YAAM;AACdjB,MAAAA,KAAK,CAAC,2CAA2C,MAAKzC,KAAL,CAAWuD,QAAtD,GAAiE,UAAjE,GAA8E,MAAKvD,KAAL,CAAW2D,IAAX,CAAgBtD,GAA/F,EAAoG;AAAEqC,QAAAA,MAAM,EAAE;AAAV,OAApG,CAAL,CACCC,IADD,CACM,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OADT,EAECF,IAFD,CAEO,UAAAP,IAAI,EAAI;AACX,cAAKW,aAAL;;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYb,IAAZ;AACH,OALD;AAOA;;;;;;;;;;;;;;;;;AAiBH,KAzJiB;;AAGd,UAAKpC,KAAL,GAAW;AACP2D,MAAAA,IAAI,EAAE,MAAKhE,KAAL,CAAWgE,IADV;AAEP1D,MAAAA,SAAS,EAAE,EAFJ;AAGP8B,MAAAA,aAAa,EAAE,EAHR;AAIPM,MAAAA,UAAU,EAAE,CAJL;AAKPC,MAAAA,IAAI,EAAE,KALC;AAMPd,MAAAA,IAAI,EAAE,EANC;AAOP+B,MAAAA,QAAQ,EAAE;AAPH,KAAX;AAHc;AAYjB;;;;wCAEmB;AAChB,WAAKR,aAAL;AACH;;;oCAsEc;AAAA;;AACXN,MAAAA,KAAK,CAAChD,GAAG,GAAG,KAAKO,KAAL,CAAW2D,IAAX,CAAgBtD,GAAvB,CAAL,CACCsC,IADD,CACM,UAAAiB,QAAQ;AAAA,eAAIA,QAAQ,CAACf,IAAT,EAAJ;AAAA,OADd,EAECF,IAFD,CAEM,UAAAP,IAAI;AAAA,eAAI,MAAI,CAACN,QAAL,CAAc;AACxB7B,UAAAA,SAAS,EAAEmC;AADa,SAAd,EAEX,YAAM;AACD,UAAA,MAAI,CAACxC,eAAL;AACH,SAJS,CAAJ;AAAA,OAFV;AAQH;;;6BA4DQ;AAAA;;AAEL,UAAMiE,IAAI,GAAG,KAAK7D,KAAL,CAAW+B,aAAX,CAAyB+B,GAAzB,CAA6B,UAAA1B,IAAI;AAAA,eAC1C;AAAK,UAAA,GAAG,EAAEA,IAAI,CAAC/B,GAAf;AAAoB,UAAA,SAAS,EAAC,iBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,WAAf;AAA2B,UAAA,GAAG,EAAE+B,IAAI,CAACT,KAArC;AAA4C,UAAA,GAAG,EAAC,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,EAEI;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKS,IAAI,CAAChB,IAAV,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIgB,IAAI,CAACV,OAAT,CAFJ,CAFJ,CADJ,EAQI;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,MAAI,CAAC1B,KAAL,CAAW2D,IAAX,CAAgBtD,GAAhB,IAAuB+B,IAAI,CAAC9B,MAA5B,GACA,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAC,UAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAQ,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAC6B,UAAL,CAAgBC,IAAhB,CAAN;AAAA,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAEI;AAAQ,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACI,YAAL,CAAkBJ,IAAlB,CAAN;AAAA,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,CAFF,CADA,GAQI,IATN,CARJ,CADJ,EAsBI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACM,MAAI,CAACpC,KAAL,CAAWqC,UAAX,KAA0BD,IAAI,CAAC/B,GAA/B,IAAsC,MAAI,CAACL,KAAL,CAAWsC,IAAjD,GACM,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAO,UAAA,IAAI,EAAC,MAAZ;AAAmB,UAAA,KAAK,EAAE,MAAI,CAACtC,KAAL,CAAWwB,IAArC;AAA2C,UAAA,QAAQ,EAAE,MAAI,CAAC0B,iBAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,EAEI;AAAQ,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACM,YAAL,CAAkBpB,IAAlB,CAAN;AAAA,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,EAGI;AAAQ,UAAA,OAAO,EAAE,MAAI,CAACG,WAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHJ,CADN,GAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIH,IAAI,CAACZ,IAAT,CAPV,CAtBJ,CAD0C;AAAA,OAAjC,CAAb;AAmCA,aACI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA9B,CADA,EAEA;AAAU,QAAA,SAAS,EAAC,gBAApB;AAAqC,QAAA,WAAW,EAAC,YAAjD;AAA8D,QAAA,KAAK,EAAE,KAAKxB,KAAL,CAAWuD,QAAhF;AAA0F,QAAA,QAAQ,EAAE,KAAKD,oBAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFA,EAGA;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,SAAS,EAAC,gBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI;AAAQ,QAAA,OAAO,EAAE,KAAKI,SAAtB;AAAiC,QAAA,SAAS,EAAC,YAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,CAHA,CADJ,EASKG,IATL,CADJ;AAcH;;;;EA/McrE,S;;AAkNnB,eAAeE,IAAf","sourcesContent":["import React, { Component } from 'react';\nimport './Wall.css';\n\nconst API = 'http://localhost:4000/api/statuses/';\n\n\nclass Wall extends Component {\n    constructor(props){\n        super(props);\n\n        this.state={\n            user: this.props.user,\n            apiStatus: [],\n            matchedStatus: [],\n            editStatus: 0,\n            edit: false,\n            text: \"\",\n            textArea: \"\",\n        }\n    }\n\n    componentDidMount() {\n        this.fetchStatuses();\n    }\n\n    matchStatusUser = () => {\n        let statusList = [];\n        let users = this.props.users;\n        let statuses = this.state.apiStatus;\n\n        // For every user\n        for (let i = 0; i < users.length; i++ ) {\n            // For every user, for every status\n            for (let e = 0; e < statuses.length; e++) {\n                // If the user is the author of a status\n                if (users[i]._id === statuses[e].author){\n                    // Add User name + Lastname + Email + Avatar etc to the status\n\n                    let convTime = Date.parse(statuses[e].timestamp) //Converts the timesamp in statuses to \"unix timestamp\"\n                    let compare = new Date(Date.now()- convTime) //Compares the time when it was posted with todays date/time\n\n                    let status = {\n                        name: `${users[i].first_name} ${users[i].last_name}`,\n                        email: users[i].email,\n                        text: statuses[e].text,\n                        time: statuses[e].timestamp,\n                        author: statuses[e].author,\n                        timeAgo: timeSince(new Date(Date.now() - compare)),\n                        _id: statuses[e]._id,\n                        image: users[i].url\n                    }\n                    //Func that tells how long ago status was posted\n                    function timeSince(date) {\n\n                      var seconds = Math.floor((new Date() - date) / 1000);\n\n                      var interval = Math.floor(seconds / 31536000);\n\n                      if (interval >= 1) {\n                        return interval + \" years ago\";\n                      }\n                      interval = Math.floor(seconds / 2592000);\n                      if (interval >= 1) {\n                        return interval + \" months ago\";\n                      }\n                      interval = Math.floor(seconds / 86400);\n                      if (interval >= 1) {\n                        return interval + \" days ago\";\n                      }\n                      interval = Math.floor(seconds / 3600);\n                      if (interval >= 1) {\n                        return interval + \" h ago\";\n                      }\n                      interval = Math.floor(seconds / 60);\n                      if (interval >= 1) {\n                        return interval + \" min ago\";\n                      }\n                      return \" just now\";\n                    }\n                    statusList.push(status);\n                }\n            }\n        }\n        this.setState(\n            {\n                matchedStatus: statusList.sort(function(a,b){\n                    return new Date(b.time) - new Date(a.time);\n                })\n            }\n        )\n    }\n\n\n    fetchStatuses(){\n        fetch(API + this.state.user._id)\n        .then(response => response.json())\n        .then(data => this.setState({\n            apiStatus: data\n        }, () => {\n                this.matchStatusUser();\n            })\n        )\n    }\n\n    enableEdit = data => {\n        this.setState({ editStatus: data._id, edit: true, text: data.text })\n    }\n\n    disableEdit = () => {\n        this.setState({ editStatus: 0, edit: false, text: \"\" })\n    }\n\n    deleteStatus = data => {\n        fetch(\"http://localhost:4000/api/status/\" + data._id, { method: \"DELETE\" })\n        .then(res => res.json())\n        .then(msg => {\n            this.fetchStatuses()\n            console.log(msg)\n        })\n    }\n\n    handleInputChange = event => {\n        this.setState({ text: event.target.value })\n    }\n\n    handleTextAreaChange = event => {\n        this.setState({ textArea: event.target.value})\n    }\n\n    commitChange = data => {\n        let newData = { ...data, text: this.state.text }\n\n        //fetch(API,)\n    }\n\n    putStatus = () => {\n        fetch(\"http://localhost:4000/api/status?text=\" + this.state.textArea + \"&author=\" + this.state.user._id, { method: \"PUT\" })\n        .then(res => res.json())\n        .then( data => {\n            this.fetchStatuses()\n            console.log(data)\n        })\n\n        /*fetch(\"http://localhost:4000/api/status\", {\n            method: 'PUT',\n            body: JSON.stringify({\n                text: 'test2',\n                author: \"5bbf5bd9adasc390a78\",\n                timestamp: 'time',\n                likes: [],\n                comments: [],\n            }),\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n        })\n        .then(res => res.json())\n        .then(response => console.log('Success:', JSON.stringify(response)))\n        .catch(error => console.error('Error:', error));*/\n    }\n\n    render() {\n\n        const list = this.state.matchedStatus.map(data =>\n            <div key={data._id} className=\"statusContainer\">\n                <div className=\"userInfoCard\">\n                    <div className=\"imageHeader\">\n                        <img className=\"userImage\" src={data.image} alt=\"avatar\"/>\n                        <div className=\"userNameTime\">\n                            <h4>{data.name}</h4>\n                            <p>{data.timeAgo}</p>\n                        </div>\n                    </div>\n                    <div className=\"info\">\n                    { this.state.user._id == data.author ?\n                      <React.Fragment>\n                        <button className=\"infoDots\">...</button>\n                        <div className=\"options\">\n                            <button onClick={() => this.enableEdit(data)}>Edit</button>\n                            <button onClick={() => this.deleteStatus(data)}>Delete</button>\n                        </div>\n                      </React.Fragment>\n                        : null\n                    }\n                    </div>\n                </div>\n                <div className=\"statusText\">\n                    { this.state.editStatus === data._id && this.state.edit\n                        ?   <React.Fragment>\n                                <input type=\"text\" value={this.state.text} onChange={this.handleInputChange} />\n                                <button onClick={() => this.commitChange(data)}>Save</button>\n                                <button onClick={this.disableEdit}>Discard</button>\n                            </React.Fragment>\n                        : <p>{data.text}</p>\n                    }\n                </div>\n            </div>\n        );\n        return (\n            <div className=\"wallContainer\">\n                <div className=\"createStatusContainer\">\n                <div className=\"optionCreate\"><p>Status</p></div>\n                <textarea className=\"textAreaStatus\" placeholder=\"What's up?\" value={this.state.textArea} onChange={this.handleTextAreaChange} />\n                <div className=\"postButtonContainer\">\n                    <button className=\"settingsButton\">Settings</button>\n                    <button onClick={this.putStatus} className=\"postButton\">Post</button>\n                </div>\n                </div>\n                {list}\n\n            </div>\n        );\n    }\n}\n\nexport default Wall;\n"]},"metadata":{},"sourceType":"module"}